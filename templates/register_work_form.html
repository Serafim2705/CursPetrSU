<!DOCTYPE html>
<html>
    <head>
        <title>Курс: регистрация работы</title>
    </head>
    <body>
        {% extends "base.html" %}

        {% block content %}
            <div id="webd_user">
                <div class="webd_user_header">
                    <a href="/index" id="search_link">К поиску и просмотру работ</a> |
                    <a href="https://kurs.cs.petrsu.ru/templates" id="templates_link">Шаблоны отчетов и
                    презентаций</a>
                    |
                    <a href="/register" id="identity_link">Назад к выбору года</a> |
                    <a href="/upload" id="upload_link">Загрузка файлов</a> |
                    <a href="/login/exit">Выход</a>
                </div>
                <h2>Здравствуйте, {{ stud_name }}!</h2>
                <h2>Регистрационные данные за {{ work_data.year }} уч. год</h2>
                <h3>Курс: {{ work_data.group[2] }}, Группа: {{ work_data.group }}</h3>
                <em>Если группа изменилась в течении учебного года, то зарегистрируйте работу повторно!(группа обновится
                автоматически) </em>
                <hr>
                {% if is_new_work == True %}
                    <form class="webd_user_copy_form" method="POST" action="">
                        <input type="hidden" name="copy" value="true">
                        <em><b>Если данные (кроме года регистрации) не изменились - нажмите кнопку</b>
                            <input type="submit" value="Скопировать" class="inp btn_copy">
                        </em>
                    </form>
                {% endif %}
                <form class="webd_user_form" method="POST">
                    <em>Для регистрации полностью новой работы необходимо заполнить все поля ввода, отмеченные символом
                        <span class="star">*</span>!</em>
                    <div title="Имя и отчество руководителя работы в формате &#39;И.О. Фамилия&#39;. Если руководителей несколько, то перечислить через запятую.">
                        <label for="adviser-name" class="user_form_label">
                            <span class="star">*</span>
                            Руководитель (в формате "И. О. Фамилия"):
                        </label>
                        <input type="text"
                               id="adviser-name"
                               name="adviser-name"
                               class="user_adviser_name inp txt_inp"
                               placeholder="И. О. Фамилия"
                               style="width:400px"
                               pattern="([А-Я|A-Z]\.\s?){1,2}[А-Я|A-Z][А-Я|A-Z|а-я|a-z]{0,20}(,\s?([А-Я|A-Z]\.\s?){1,2}[А-Я|A-Z][А-Я|A-Z|а-я|a-z]{0,20})*"
                               required="required"
                               value="{{ work_data.tutor_name }}">
                    </div>
                    <div title="Должность, занимаемая руководителем работы. Например, &#39;преподаватель&#39;.">
                        <label for="adviser-position" class="user_form_label">
                            <span class="star">*</span>Должность
                            руководителя:
                        </label>
                        <select name="adviser-position"
                                id="adviser-position"
                                class="user_adviser_position inp txt_inp"
                                required>
                            <option value="" disabled selected></option>
                            {% for pos in tutor_positions %}
                                <option value="{{ pos }}"
                                        {% if work_data is defined and work_data.tutor_pos is defined and work_data.tutor_pos == pos %}selected{% endif %}>
                                    {{ pos }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div title="Ученая степень руководителя работы (учитывать только степени кандидата и доктора наук).">
                        <label for="adviser-status" class="user_form_label">Ученая степень руководителя:</label>
                        <input id="adviser-status"
                               placeholder="к. т. н."
                               type="text"
                               name="adviser-status"
                               class="user_adviser_status inp txt_inp"
                               list="status-list"
                               autocomplete="off"
                               value="{{ work_data.tutor_status }}"
                               pattern="[А-Яа-яA-Za-z\.\-\s]*">
                        <datalist id="status-list">
                            <option value="без степени">без степени</option>
                            <option value="к. ф-м. н.">к. ф-м. н.</option>
                            <option value="д. ф-м. н." д. ф-м. н.
                            </option>
                            <option value="к. т. н." к. т. н.
                            </option>
                            <option value="д. т. н." д. т. н.
                            </option>
                            <option value="к. пед. н." к. пед. н.
                            </option>
                        </datalist>
                    </div>
                    <div title="Ученое звание руководителя работы. В России существуют звания &#39;доцент&#39; и &#39;профессор&#39;.">
                        <label for="adviser-rank" class="user_form_label">Ученое звание руководителя:</label>
                        <select id="adviser-rank"
        name="adviser-rank"
        class="user_adviser_rank inp txt_inp">
    <option value=""></option>
    {% for rank in tutor_ranks %}
        <option value="{{ rank }}"
            {% if work_data is defined and work_data.tutor_rank is defined and work_data.tutor_rank == rank %}
                selected
            {% endif %}
        >{{ rank }}</option>
    {% endfor %}
</select>

                    </div>
                    <div title="Определяется по кафедре, к которой приписан научный руководитель.">
                        <label for="department" class="user_form_label">
                            <span class="star">*</span>Кафедра:
                        </label>
                        <select id="department"
                                name="department"
                                class="user_department inp txt_inp"
                                required="required">
                            <option value="" disabled="disabled" selected="selected"></option>
                            <option value="ПМиК" {% if work_data.departament is defined %} {% if
                                work_data.departament=='ПМиК' %} selected="selected" {% endif %} {% endif %}>
                                ПМиК
                            </option>
                            <option value="ИМО" {% if work_data.departament is defined %} {% if work_data.departament=='ИМО'
                                %} selected="selected" {% endif %} {% endif %}>ИМО</option>
                            <option value="ГиТ" {% if work_data.departament is defined %} {% if work_data.departament=='ГиТ'
                                %} selected="selected" {% endif %} {% endif %}>ГиТ</option>
                            <option value="МА" {% if work_data.departament is defined %} {% if work_data.departament=='МА'
                                %} selected="selected" {% endif %} {% endif %}>МА</option>
                            <option value="ТВиАД" {% if work_data.departament is defined %} {% if
                                work_data.departament=='ТВиАД' %} selected="selected" {% endif %} {% endif %}>
                                ТВиАД
                            </option>
                            <option value="ТМОМИ" {% if work_data.departament is defined %} {% if
                                work_data.departament=='ТМОМИ' %} selected="selected" {% endif %} {% endif %}>
                                ТМОМИ
                            </option>
                        </select>
                    </div>
                    <div>
                        <label for="user_title" class="user_form_label" style="vertical-align:top">
                            <span class="star">*</span>Тема работы:
                        </label>
                        <textarea id="user_title"
                                  name="title"
                                  class="user_title inp"
                                  rows="3"
                                  style="width:400px"
                                  maxlength="250"
                                  required="required">{{ work_data.title }}</textarea>
                    </div>
                    <div>
                        <input type="submit"
                               value="Отправить"
                               class="inp btn_save"
                               name="replace-type">
                    </div>
                </form>
                {% if message is defined %}
                    {% if message !=None %}
                        <p>{{ message }}</p>
                    {% endif %}
                {% endif %}
            </div>
        {% endblock content %}
        <hr>

</body>
</html>
